<html>
    <head>
        <script>
            function sortNumber(a,b) {
                return a - b;
            }

            function oneD() {
                var s = document.getElementById('oneD').value;
                var vals = s.split("\n").map(Number).filter(Boolean);

                var printer = document.getElementById('output');
                printer.innerHTML = "";

                printer.innerHTML += "Getting closest pairs of: "
                    + vals.toString() + "<br>";

                vals.sort(sortNumber);
                printer.innerHTML += "Sorted: " + vals.toString() + "<br>";

                function minPair(pairs) {
                    function min2(previousValue, currentValue, currentIndex, array) {
                        if (previousValue[0] == -1 || previousValue[0] > currentValue[0]) {
                            return currentValue;
                        }
                        else {
                            return previousValue;
                        }
                    }

                    var res = pairs.reduce(min2);
                    printer.innerHTML += "Min pair of " + pairs.toString() + " -> " + res.toString() + "<br>";

                    return res;
                }

                function closest(pairs) {
                    if (pairs.length == 1) {
                        return [-1, pairs];
                    }
                    else if (pairs.length == 2) {
                        return [Math.abs(pairs[1] - pairs[0]), pairs];
                    }
                    else {
                        var split2 = medianSplit(pairs);
                        var dleft = closest(split2[0]);
                        var dright = closest(split2[1]);
                        var dmid = closest([split2[0][split2[0].length-1],
                            split2[1][0]]);

                        return minPair([dleft, dright, dmid]);
                    }

                }

                var res = closest(vals);
                printer.innerHTML += "Closest pair: " + res[1].toString() + " with a distance of: " + res[0].toString() + "<br>";

            }

            function medianSplit(array) {
                var printer = document.getElementById('output');
                var l = array.length;

                var mid = Math.floor(l/2);
                var left = array.slice(0, mid);
                var right = array.slice(mid, l);
                printer.innerHTML += "Slice " + array.toString() + " -> " +
                    left.toString() + " " + right.toString() + "<br>";

                return [left, right];
            }

        </script>

        <style>
        .input {
            clear: left;
            float: left;
            display: block;
            padding: 5px;
        }

        #output {
            display: inline-block;
        }
        </style>
    </head>

    <body>
        <div class="input" id="input1D">
            1D: <br>
            <textarea id="oneD" rows="6">
42
23
98
40
10
3
            </textarea><br>
            <button type="button" onclick="oneD()">Calc 1D</button> <br>
        </div>
        <div class="input" id="input2D">
            2D: <br>
            <textarea id="twoD" rows="6">
42,22
23,12
98,46
40,33
10,12
3,5
            </textarea><br>
        <button type="button" onclick="twoD()">Calc 2D</button> <br>
        </div>

        <div id="output"></div>
    </body>
</html>
